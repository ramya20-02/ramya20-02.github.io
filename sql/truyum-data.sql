-- Include table data insertion, updation, deletion and select scripts
-- --------------------------------------------------------------------
-- Adding Menu Items in MenuItem Table
-- --------------------------------------------------------------------
INSERT INTO menu_item
VALUES
(1, 'Sandwich', 99.0,'Yes','2017-03-15','Main Course','Yes'),
(2, 'Burger', 129.0,'Yes', '2017-12-23','Main Course','No'),
(3, 'Pizza', 149.0,'Yes', '2018-08-21', 'Main Course', 'No'),
(4, 'French Fries', 57.0,'No', '2017-07-02','Starters', 'Yes'),
(5, 'Choclate Brownie', 32.0,'Yes','2022-11-02','Dessert','Yes');


-- --------------------------------------------------------------------------------------
-- Display Admin List
-- --------------------------------------------------------------------------------------
SELECT *FROM menu_item;

-- --------------------------------------------------------------------------------------
-- Update MenuItem
-- --------------------------------------------------------------------------------------
UPDATE menu_item 
SET me_name='Biryani' ,me_price=220,me_active='Yes',me_date_of_launch='2012-01-01',me_category='Main Course',me_free_delivery='Yes'
WHERE me_id=1;


-- --------------------------------------------------------------------------------------
-- Display Admin List
-- --------------------------------------------------------------------------------------
SELECT *from menu_item;


-- --------------------------------------------------------------------------------------
-- Creating Users
-- --------------------------------------------------------------------------------------
INSERT INTO user(us_id,us_name)
VALUES (1,'Ramya'),(2,'Vishwaja');


-- --------------------------------------------------------------------------------------
-- Display User List
-- --------------------------------------------------------------------------------------
SELECT *FROM user;


-- --------------------------------------------------------------------------------------
-- Customer Menu Item List
-- --------------------------------------------------------------------------------------
SELECT me_name, me_free_delivery, me_price, me_category 
FROM menu_item 
WHERE me_active='Yes' AND me_date_of_launch  <= (SELECT(curdate())); 


-- --------------------------------------------------------------------------------------
-- Cart
-- --------------------------------------------------------------------------------------
INSERT INTO cart(ct_us_id,ct_pr_id) VALUES (1,2);
INSERT INTO cart(ct_us_id,ct_pr_id) VALUES (1,3);

SELECT* FROM cart;


-- --------------------------------------------------------------------------------------
--  To View Cart
-- --------------------------------------------------------------------------------------
SELECT me_name,me_free_delivery, me_price  
FROM menu_item
INNER JOIN cart 
ON ct_pr_id=me_id
WHERE ct_us_id=1;


-- --------------------------------------------------------------------------------------
--  Total Calculation
-- --------------------------------------------------------------------------------------
SELECT sum(me_price) as Total 
FROM menu_item
INNER JOIN cart 
ON ct_pr_id=me_id
WHERE ct_us_id=1;


-- --------------------------------------------------------------------------------------
-- To Display Cart
-- --------------------------------------------------------------------------------------
SELECT *FROM cart;


-- --------------------------------------------------------------------------------------
-- To Delete an Item From Cart
-- --------------------------------------------------------------------------------------
DELETE FROM cart 
WHERE ct_us_id=1 AND ct_pr_id=3 limit 1;


-- --------------------------------------------------------------------------------------
-- To Display Cart
-- --------------------------------------------------------------------------------------
SELECT *FROM cart;


-- --------------------------------------------------------------------------------------
--  To View Cart after Deleting
-- --------------------------------------------------------------------------------------
SELECT me_name,me_free_delivery, me_price  
FROM menu_item
INNER JOIN cart 
ON ct_pr_id=me_id
WHERE ct_us_id=1;


-- --------------------------------------------------------------------------------------
--  Total Calculation
-- --------------------------------------------------------------------------------------
SELECT sum(me_price) as Total 
FROM menu_item
INNER JOIN cart 
ON ct_pr_id=me_id
WHERE ct_us_id=1;


-- --------------------------------------------------------------------------------------
-- To Display Cart After Deleting
-- --------------------------------------------------------------------------------------
SELECT *FROM cart;
